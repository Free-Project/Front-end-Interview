# React函数式组件性能优化
react hooks的出现使得函数组件拥有类组件的能力，且函数组件不像类组件有内置的生命周期，所以相对而言，函数组件更轻量，代码书写上也更简洁。but，函数组件也不是完美的，它在每次渲染的时候都会重新调用一次，内部如果有复杂的计算，更新一次就会重新执行，十分耗时。

## diff算法
函数组件和类组件在进行更新的时候都避不开diff算法，这是相当耗时的一个过程。比较渲染前后生成的两棵虚拟dom树的差异，更新差异，渲染成真实dom。diff算法不比直接操作dom快，甚至还可能慢，因为它多了一个比较过程，而直接操作dom不需要这个环节。

## React 性能优化思路
针对以上描述，react函数组件的性能优化主要方向有两个：

1. 减少重新 render 的次数（减少diff）。因为在 React 里最重(花时间最长)的一块就是 reconction(简单的可以理解为 diff)，如果不 render，就不会 reconction。官方管有reconction: https://reactjs.org/docs/reconciliation.html
2. 避免重复计算。主要是减少重复计算，对于函数式组件来说，每次 render 都会重新从头开始执行函数调用。
